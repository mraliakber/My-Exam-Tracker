<!DOCTYPE html>
<html lang="en">
<link rel="shortcut icon" href="favicon.png" type="image/x-icon">k

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudySync ‚Äî Exam Tracker</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,300&family=DM+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --cream: #faf7f2;
            --cream2: #f2ede4;
            --cream3: #e8e0d0;
            --ink: #1a1510;
            --ink2: #3d3528;
            --ink3: #6b6050;
            --ink4: #9b8f7e;
            --red: #c0392b;
            --red-soft: #fde8e8;
            --green: #2d6a4f;
            --green-soft: #dff0e8;
            --amber: #b5580a;
            --amber-soft: #fef3e2;
            --border: #d8cfc0;
            --shadow: rgba(26, 21, 16, 0.07);
            --shadow2: rgba(26, 21, 16, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--cream);
            color: var(--ink);
            min-height: 100vh;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 60px;
            width: 1px;
            height: 100%;
            background: rgba(192, 57, 43, 0.12);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1080px;
            margin: 0 auto;
            padding: 0 24px 80px;
            position: relative;
            z-index: 1;
        }

        /* ===== HEADER ===== */
        header {
            padding: 52px 0 36px;
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            gap: 24px;
            border-bottom: 1.5px solid var(--border);
            margin-bottom: 36px;
            flex-wrap: wrap;
        }

        .hdr-eyebrow {
            font-family: 'DM Mono', monospace;
            font-size: 10px;
            letter-spacing: 4px;
            text-transform: uppercase;
            color: var(--ink4);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .hdr-eyebrow::before {
            content: '';
            width: 24px;
            height: 1px;
            background: var(--ink4);
            display: inline-block;
        }

        .hdr-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.6rem, 5.5vw, 4.2rem);
            font-weight: 900;
            line-height: 1.0;
            letter-spacing: -2px;
        }

        .hdr-title .italic {
            font-style: italic;
            color: var(--red);
        }

        .hdr-sub {
            margin-top: 12px;
            font-size: 15px;
            color: var(--ink3);
            font-weight: 300;
            letter-spacing: 0.2px;
        }

        .date-card {
            background: var(--ink);
            color: var(--cream);
            padding: 16px 22px;
            border-radius: 16px;
            min-width: 130px;
            text-align: center;
        }

        .dc-day {
            font-family: 'DM Mono', monospace;
            font-size: 9px;
            letter-spacing: 3px;
            text-transform: uppercase;
            opacity: 0.45;
        }

        .dc-num {
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 700;
            line-height: 1.1;
        }

        .dc-month {
            font-family: 'DM Mono', monospace;
            font-size: 9px;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.45;
            margin-top: 2px;
        }

        /* ===== STATS ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 14px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 18px;
            padding: 20px 18px 16px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 10px var(--shadow);
            transition: transform .25s, box-shadow .25s;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 28px var(--shadow2);
        }

        .stat-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--c, var(--ink));
            opacity: 0.18;
        }

        .stat-icon {
            font-size: 1.2rem;
            margin-bottom: 8px;
        }

        .stat-val {
            font-family: 'Playfair Display', serif;
            font-size: 2.1rem;
            font-weight: 700;
            line-height: 1;
            color: var(--ink);
        }

        .stat-lbl {
            font-size: 10px;
            font-weight: 600;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--ink4);
            margin-top: 5px;
        }

        /* ===== QUOTE ===== */
        .quote-bar {
            background: var(--ink);
            border-radius: 16px;
            padding: 16px 22px;
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            gap: 14px;
            position: relative;
            overflow: hidden;
        }

        .quote-bar::before {
            content: '"';
            font-family: 'Playfair Display', serif;
            font-size: 8rem;
            color: white;
            opacity: 0.05;
            position: absolute;
            left: 8px;
            top: -24px;
            line-height: 1;
        }

        .q-text {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 14px;
            color: rgba(250, 247, 242, 0.85);
            flex: 1;
            z-index: 1;
            position: relative;
        }

        .q-btn {
            width: 32px;
            height: 32px;
            border-radius: 9px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            color: rgba(255, 255, 255, 0.45);
            cursor: pointer;
            font-size: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all .2s;
            z-index: 1;
            flex-shrink: 0;
        }

        .q-btn:hover {
            background: rgba(255, 255, 255, 0.14);
            color: white;
            transform: rotate(90deg);
        }

        /* ===== TOOLBAR ===== */
        .toolbar {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 26px;
            flex-wrap: wrap;
        }

        .toolbar-l {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            flex: 1;
            align-items: center;
        }

        .toolbar-r {
            display: flex;
            gap: 8px;
        }

        .btn {
            font-family: 'DM Sans', sans-serif;
            font-size: 13px;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 10px;
            border: 1.5px solid transparent;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 7px;
            transition: all .2s;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--ink);
            color: var(--cream);
        }

        .btn-primary:hover {
            background: #2d2015;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow2);
        }

        .btn-secondary {
            background: white;
            color: var(--ink);
            border-color: var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--ink);
        }

        .btn-ghost {
            background: transparent;
            color: var(--ink3);
            border-color: transparent;
            padding: 8px 14px;
            font-size: 12px;
        }

        .btn-ghost:hover {
            background: var(--cream2);
            color: var(--ink);
        }

        .search-wrap {
            display: flex;
            align-items: center;
            gap: 8px;
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 10px;
            padding: 8px 14px;
            transition: border-color .2s;
        }

        .search-wrap:focus-within {
            border-color: var(--ink);
        }

        .search-wrap input {
            border: none;
            outline: none;
            font-family: 'DM Sans', sans-serif;
            font-size: 13px;
            color: var(--ink);
            background: transparent;
            width: 160px;
        }

        .search-wrap input::placeholder {
            color: var(--ink4);
        }

        /* ===== SUBJECTS GRID ===== */
        .subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(330px, 1fr));
            gap: 20px;
        }

        /* ===== SUBJECT CARD ===== */
        .s-card {
            background: white;
            border: 1.5px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 3px 14px var(--shadow);
            transition: transform .3s, box-shadow .3s;
            animation: cardIn .35s cubic-bezier(.34, 1.56, .64, 1) both;
        }

        @keyframes cardIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(.97);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .s-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 16px 44px var(--shadow2);
        }

        .card-bar {
            height: 5px;
        }

        .card-head {
            padding: 20px 22px 14px;
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 10px;
            border-bottom: 1px solid var(--cream3);
        }

        .ch-info {
            flex: 1;
        }

        .ch-name {
            font-family: 'Playfair Display', serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--ink);
            margin-bottom: 7px;
        }

        .ch-tags {
            display: flex;
            align-items: center;
            gap: 7px;
            flex-wrap: wrap;
        }

        .tag {
            font-family: 'DM Mono', monospace;
            font-size: 9px;
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
            padding: 3px 9px;
            border-radius: 6px;
        }

        .tag-marks {
            background: var(--cream2);
            color: var(--ink3);
        }

        .tag-date {
            background: var(--amber-soft);
            color: var(--amber);
        }

        .tag-pri-high {
            background: var(--red-soft);
            color: var(--red);
        }

        .tag-pri-med {
            background: var(--amber-soft);
            color: var(--amber);
        }

        .tag-pri-low {
            background: var(--green-soft);
            color: var(--green);
        }

        .tag-countdown {
            background: var(--red-soft);
            color: var(--red);
        }

        .ch-del-btn {
            width: 30px;
            height: 30px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--ink4);
            cursor: pointer;
            font-size: 13px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all .2s;
            flex-shrink: 0;
        }

        .ch-del-btn:hover {
            border-color: var(--red);
            color: var(--red);
            background: var(--red-soft);
        }

        /* Progress */
        .card-prog {
            padding: 14px 22px;
            border-bottom: 1px solid var(--cream3);
        }

        .prog-hdr {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .prog-hdr span {
            font-size: 12px;
            color: var(--ink3);
            font-weight: 500;
        }

        .prog-hdr strong {
            font-family: 'DM Mono', monospace;
            font-size: 11px;
            color: var(--ink2);
        }

        .prog-track {
            height: 7px;
            background: var(--cream3);
            border-radius: 99px;
            overflow: hidden;
        }

        .prog-fill {
            height: 100%;
            border-radius: 99px;
            transition: width .6s cubic-bezier(.34, 1.56, .64, 1);
        }

        /* Chapters */
        .card-chaps {
            padding: 14px 22px;
            border-bottom: 1px solid var(--cream3);
        }

        .sec-lbl {
            font-size: 9px;
            font-weight: 600;
            letter-spacing: 2.5px;
            text-transform: uppercase;
            color: var(--ink4);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sec-lbl::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--cream3);
        }

        .chap-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 12px;
        }

        .chap-row {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 9px 12px;
            border-radius: 10px;
            background: var(--cream);
            border: 1px solid transparent;
            cursor: pointer;
            transition: all .2s;
        }

        .chap-row:hover {
            background: var(--cream2);
            border-color: var(--border);
        }

        .chap-row.done {
            background: #f0f7f4;
            border-color: #c8e8d8;
        }

        .chap-cb {
            width: 18px;
            height: 18px;
            border-radius: 5px;
            border: 1.5px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
            flex-shrink: 0;
            transition: all .2s;
        }

        .chap-row.done .chap-cb {
            background: var(--green);
            border-color: var(--green);
        }

        .chap-n {
            flex: 1;
            font-size: 13px;
            font-weight: 500;
            color: var(--ink);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chap-row.done .chap-n {
            text-decoration: line-through;
            color: var(--ink4);
        }

        .chap-mbadge {
            font-family: 'DM Mono', monospace;
            font-size: 9px;
            padding: 2px 7px;
            border-radius: 20px;
            background: var(--cream3);
            color: var(--ink3);
            flex-shrink: 0;
        }

        .chap-row.done .chap-mbadge {
            background: #c8e8d8;
            color: var(--green);
        }

        .chap-x {
            background: none;
            border: none;
            color: var(--ink4);
            cursor: pointer;
            font-size: 12px;
            padding: 2px;
            opacity: 0;
            transition: opacity .2s;
            flex-shrink: 0;
        }

        .chap-row:hover .chap-x {
            opacity: 1;
        }

        .chap-x:hover {
            color: var(--red);
        }

        .add-chap {
            display: flex;
            gap: 7px;
            align-items: center;
        }

        .add-chap input {
            background: var(--cream);
            border: 1.5px solid var(--border);
            border-radius: 8px;
            padding: 8px 11px;
            font-family: 'DM Sans', sans-serif;
            font-size: 12px;
            color: var(--ink);
            outline: none;
            transition: border-color .2s;
        }

        .add-chap input:focus {
            border-color: var(--ink);
            background: white;
        }

        .add-chap input::placeholder {
            color: var(--ink4);
        }

        .add-chap .inp-n {
            flex: 1;
        }

        .add-chap .inp-m {
            width: 70px;
            flex-shrink: 0;
        }

        .add-chap-btn {
            width: 33px;
            height: 33px;
            border-radius: 8px;
            background: var(--ink);
            border: none;
            color: white;
            font-size: 19px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all .2s;
            flex-shrink: 0;
        }

        .add-chap-btn:hover {
            background: var(--red);
            transform: scale(1.08);
        }

        /* Log */
        .card-log {
            padding: 14px 22px 20px;
        }

        .log-input-row {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        .log-input-row textarea {
            flex: 1;
            background: var(--cream);
            border: 1.5px solid var(--border);
            border-radius: 10px;
            padding: 9px 12px;
            font-family: 'DM Sans', sans-serif;
            font-size: 13px;
            color: var(--ink);
            resize: none;
            height: 60px;
            outline: none;
            line-height: 1.5;
            transition: all .2s;
        }

        .log-input-row textarea:focus {
            border-color: var(--ink);
            background: white;
        }

        .log-input-row textarea::placeholder {
            color: var(--ink4);
        }

        .log-send {
            width: 38px;
            height: 60px;
            background: var(--ink);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 18px;
            cursor: pointer;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all .2s;
        }

        .log-send:hover {
            background: var(--red);
        }

        .log-entries {
            max-height: 150px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .log-entry {
            display: flex;
            gap: 10px;
            padding: 8px 10px;
            background: var(--cream);
            border-left: 3px solid var(--cream3);
            border-radius: 0 8px 8px 0;
            animation: logIn .2s ease;
        }

        @keyframes logIn {
            from {
                opacity: 0;
                transform: translateX(-8px);
            }

            to {
                opacity: 1;
                transform: none;
            }
        }

        .log-dt {
            font-family: 'DM Mono', monospace;
            font-size: 9px;
            color: var(--ink4);
            letter-spacing: .5px;
            white-space: nowrap;
            padding-top: 2px;
        }

        .log-txt {
            flex: 1;
            font-size: 12px;
            color: var(--ink2);
            line-height: 1.5;
        }

        .log-x {
            background: none;
            border: none;
            color: var(--ink4);
            cursor: pointer;
            font-size: 12px;
            opacity: 0;
            transition: opacity .2s;
        }

        .log-entry:hover .log-x {
            opacity: 1;
        }

        .log-x:hover {
            color: var(--red);
        }

        /* ===== EMPTY ===== */
        .empty-state {
            grid-column: 1/-1;
            text-align: center;
            padding: 80px 20px;
        }

        .empty-icon {
            font-size: 5rem;
            display: block;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-12px);
            }
        }

        .empty-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 12px;
        }

        .empty-title em {
            font-style: italic;
            color: var(--red);
        }

        .empty-desc {
            font-size: 14px;
            color: var(--ink3);
            max-width: 340px;
            margin: 0 auto 28px;
            line-height: 1.7;
        }

        /* ===== MODAL ===== */
        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(26, 21, 16, 0.55);
            backdrop-filter: blur(12px);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .overlay.open {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 24px;
            padding: 38px;
            width: 100%;
            max-width: 480px;
            max-height: 92vh;
            overflow-y: auto;
            box-shadow: 0 40px 100px rgba(26, 21, 16, 0.3);
            animation: mIn .3s cubic-bezier(.34, 1.56, .64, 1);
            position: relative;
        }

        @keyframes mIn {
            from {
                opacity: 0;
                transform: scale(.9) translateY(24px);
            }

            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 34px;
            height: 34px;
            border-radius: 10px;
            background: var(--cream);
            border: 1px solid var(--border);
            color: var(--ink4);
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all .2s;
        }

        .modal-close:hover {
            background: var(--red-soft);
            border-color: var(--red);
            color: var(--red);
        }

        .m-eyebrow {
            font-family: 'DM Mono', monospace;
            font-size: 9px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: var(--ink4);
            margin-bottom: 8px;
        }

        .m-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.9rem;
            font-weight: 800;
            margin-bottom: 28px;
        }

        .m-title em {
            font-style: italic;
            color: var(--red);
        }

        .field {
            margin-bottom: 18px;
        }

        .field label {
            display: block;
            font-size: 10px;
            font-weight: 600;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            color: var(--ink3);
            margin-bottom: 7px;
        }

        .field input,
        .field select {
            width: 100%;
            background: var(--cream);
            border: 1.5px solid var(--border);
            border-radius: 10px;
            padding: 12px 14px;
            font-family: 'DM Sans', sans-serif;
            font-size: 14px;
            color: var(--ink);
            outline: none;
            transition: all .2s;
        }

        .field input:focus,
        .field select:focus {
            border-color: var(--ink);
            background: white;
            box-shadow: 0 0 0 3px rgba(26, 21, 16, 0.05);
        }

        .field input::placeholder {
            color: var(--ink4);
        }

        .color-picker {
            display: flex;
            gap: 9px;
            flex-wrap: wrap;
        }

        .c-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2.5px solid transparent;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.18);
            transition: all .2s;
        }

        .c-dot:hover {
            transform: scale(1.15);
        }

        .c-dot.sel {
            border-color: var(--ink);
            transform: scale(1.2);
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.28);
        }

        .m-footer {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .m-footer .btn {
            flex: 1;
            justify-content: center;
        }

        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--cream3);
            border-radius: 99px;
        }

        @media (max-width: 640px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }

            .date-card {
                align-self: stretch;
                display: flex;
                align-items: center;
                gap: 16px;
                text-align: left;
            }

            .dc-num {
                font-size: 2rem;
            }

            .subjects-grid {
                grid-template-columns: 1fr;
            }

            .modal {
                padding: 28px 20px;
            }

            .search-wrap input {
                width: 110px;
            }
        }
    </style>
</head>

<body>
    <div class="container">

        <!-- HEADER -->
        <header>
            <div>
                <div class="hdr-eyebrow">2nd Year ¬∑ Exam Season</div>
                <div class="hdr-title">Study<span class="italic">Sync</span></div>
                <div class="hdr-sub">Track your syllabus. Conquer your exams.</div>
            </div>
            <div class="date-card">
                <div class="dc-day" id="hDay">‚Äî</div>
                <div class="dc-num" id="hNum">‚Äî</div>
                <div class="dc-month" id="hMonth">‚Äî</div>
            </div>
        </header>

        <!-- STATS -->
        <div class="stats-grid">
            <div class="stat-card" style="--c:#1a4a7a">
                <div class="stat-icon">üìö</div>
                <div class="stat-val" id="s0">0</div>
                <div class="stat-lbl">Subjects</div>
            </div>
            <div class="stat-card" style="--c:#5a2d82">
                <div class="stat-icon">üìë</div>
                <div class="stat-val" id="s1">0</div>
                <div class="stat-lbl">Chapters</div>
            </div>
            <div class="stat-card" style="--c:#2d6a4f">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-val" id="s2">0</div>
                <div class="stat-lbl">Completed</div>
            </div>
            <div class="stat-card" style="--c:#b5580a">
                <div class="stat-icon">üéØ</div>
                <div class="stat-val" id="s3">0</div>
                <div class="stat-lbl">Marks Done</div>
            </div>
            <div class="stat-card" style="--c:#c0392b">
                <div class="stat-icon">üìà</div>
                <div class="stat-val" id="s4">0%</div>
                <div class="stat-lbl">Overall Progress</div>
            </div>
        </div>

        <!-- QUOTE -->
        <div class="quote-bar">
            <div class="q-text" id="qText"></div>
            <button class="q-btn" onclick="nextQ()" title="Next quote">‚Üª</button>
        </div>

        <!-- TOOLBAR -->
        <div class="toolbar">
            <div class="toolbar-l">
                <button class="btn btn-primary" onclick="openModal()">Ôºã Add Subject</button>
                <div class="search-wrap">
                    <span style="color:var(--ink4);font-size:14px">üîç</span>
                    <input type="text" placeholder="Search subjects..." oninput="setFilter(this.value)">
                </div>
            </div>
            <div class="toolbar-r">
                <button class="btn btn-secondary" onclick="toggleCompact()" id="compBtn">‚äü Compact</button>
                <button class="btn btn-ghost" onclick="clearAll()">üóë</button>
            </div>
        </div>

        <!-- GRID -->
        <div class="subjects-grid" id="grid"></div>
    </div>

    <!-- MODAL -->
    <div class="overlay" id="overlay">
        <div class="modal">
            <button class="modal-close" onclick="closeModal()">‚úï</button>
            <div class="m-eyebrow">New Entry</div>
            <div class="m-title">Add a <em>Subject</em></div>
            <div class="field">
                <label>Subject Name</label>
                <input id="fN" type="text" placeholder="e.g. Mathematics, Physics, Biology...">
            </div>
            <div class="field">
                <label>Total Paper Marks</label>
                <input id="fT" type="number" placeholder="e.g. 100">
            </div>
            <div class="field">
                <label>Exam Date (Optional)</label>
                <input id="fD" type="date">
            </div>
            <div class="field">
                <label>Priority</label>
                <select id="fP">
                    <option value="high">üî¥ High Priority</option>
                    <option value="med" selected>üü° Medium Priority</option>
                    <option value="low">üü¢ Low Priority</option>
                </select>
            </div>
            <div class="field">
                <label>Card Color</label>
                <div class="color-picker" id="cpicker"></div>
            </div>
            <div class="m-footer">
                <button class="btn btn-primary" onclick="saveSubject()">Save Subject ‚úì</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        const PAL = ['#c0392b', '#2d6a4f', '#1a4a7a', '#b5580a', '#5a2d82', '#1a6b8a', '#6b3a2a', '#2d4a1a', '#7a3a6a', '#1a3a5a'];
        const QUOTES = [
            "The secret of getting ahead is getting started.",
            "Small daily improvements lead to stunning results.",
            "Don't watch the clock; do what it does. Keep going.",
            "Success is the sum of small efforts, repeated day in and day out.",
            "You don't have to be great to start, but you have to start to be great.",
            "Hard work beats talent when talent doesn't work hard.",
            "The expert in anything was once a beginner.",
            "Every chapter you finish is a step closer to your goal.",
            "Study now so you can live the life you want later.",
            "Discipline is choosing between what you want now and what you want most.",
        ];

        let db = JSON.parse(localStorage.getItem('ss3') || '{"subjects":[]}');
        let selColor = PAL[0];
        let compact = false;
        let filterVal = '';
        let qIdx = Math.floor(Math.random() * QUOTES.length);

        (function init() {
            tickClock();
            setInterval(tickClock, 30000);
            buildPicker();
            nextQ();
            render();
        })();

        function tickClock() {
            const d = new Date();
            const DAYS = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const MONTHS = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('hDay').textContent = DAYS[d.getDay()];
            document.getElementById('hNum').textContent = String(d.getDate()).padStart(2, '0');
            document.getElementById('hMonth').textContent = MONTHS[d.getMonth()] + ' ' + d.getFullYear();
        }

        function nextQ() {
            qIdx = (qIdx + 1) % QUOTES.length;
            document.getElementById('qText').textContent = QUOTES[qIdx];
        }

        function buildPicker() {
            const c = document.getElementById('cpicker');
            c.innerHTML = '';
            selColor = PAL[0];
            PAL.forEach((col, i) => {
                const d = document.createElement('div');
                d.className = 'c-dot' + (i === 0 ? ' sel' : '');
                d.style.background = col;
                d.onclick = () => {
                    selColor = col;
                    c.querySelectorAll('.c-dot').forEach(x => x.classList.remove('sel'));
                    d.classList.add('sel');
                };
                c.appendChild(d);
            });
        }

        function save() { localStorage.setItem('ss3', JSON.stringify(db)); }

        function calcStats() {
            let chaps = 0, done = 0, totalM = 0, doneM = 0;
            db.subjects.forEach(s => s.chapters.forEach(c => {
                chaps++; totalM += c.marks || 0;
                if (c.done) { done++; doneM += c.marks || 0; }
            }));
            return { chaps, done, totalM, doneM };
        }

        function updateStats() {
            const { chaps, done, totalM, doneM } = calcStats();
            document.getElementById('s0').textContent = db.subjects.length;
            document.getElementById('s1').textContent = chaps;
            document.getElementById('s2').textContent = done;
            document.getElementById('s3').textContent = doneM;
            document.getElementById('s4').textContent = (totalM > 0 ? Math.round(doneM / totalM * 100) : 0) + '%';
        }

        function render() {
            updateStats();
            const grid = document.getElementById('grid');
            grid.innerHTML = '';

            const list = db.subjects.filter(s =>
                !filterVal || s.name.toLowerCase().includes(filterVal.toLowerCase())
            );

            if (!list.length) {
                grid.innerHTML = `
      <div class="empty-state">
        <span class="empty-icon">üìñ</span>
        <div class="empty-title">Nothing here <em>yet</em></div>
        <p class="empty-desc">${filterVal ? 'No subjects match your search.' : 'Click "Add Subject" to begin. Track every chapter, earn every mark.'}</p>
        ${!filterVal ? '<button class="btn btn-primary" onclick="openModal()" style="margin:0 auto">Ôºã Add Your First Subject</button>' : ''}
      </div>`;
                return;
            }

            list.forEach(s => {
                const si = db.subjects.indexOf(s);
                const totalM = s.chapters.reduce((a, c) => a + (c.marks || 0), 0);
                const doneM = s.chapters.filter(c => c.done).reduce((a, c) => a + (c.marks || 0), 0);
                const pct = totalM > 0 ? Math.round(doneM / totalM * 100) : 0;

                let cdTag = '';
                if (s.examDate) {
                    const today = new Date(); today.setHours(0, 0, 0, 0);
                    const exam = new Date(s.examDate);
                    const diff = Math.ceil((exam - today) / 86400000);
                    cdTag = `<span class="tag tag-countdown">${diff < 0 ? 'Exam Passed' : diff === 0 ? 'Exam Today!' : diff + 'd left'}</span>`;
                }

                const priLabel = { high: 'High', med: 'Medium', low: 'Low' }[s.priority || 'med'];

                let chHtml = s.chapters.map((ch, ci) => `
      <div class="chap-row${ch.done ? ' done' : ''}" onclick="toggleChap(${si},${ci})">
        <div class="chap-cb">${ch.done ? '‚úì' : ''}</div>
        <div class="chap-n">${esc(ch.name)}</div>
        ${ch.marks ? `<div class="chap-mbadge">${ch.marks}m</div>` : ''}
        <button class="chap-x" onclick="delChap(event,${si},${ci})">‚úï</button>
      </div>`).join('');

                let lgHtml = (s.logs || []).slice().reverse().map((l, li) => {
                    const ri = s.logs.length - 1 - li;
                    return `<div class="log-entry">
        <span class="log-dt">${l.date}</span>
        <span class="log-txt">${esc(l.text)}</span>
        <button class="log-x" onclick="delLog(event,${si},${ri})">‚úï</button>
      </div>`;
                }).join('');

                const hide = compact ? 'style="display:none"' : '';

                const card = document.createElement('div');
                card.className = 's-card';
                card.innerHTML = `
      <div class="card-bar" style="background:${s.color}"></div>
      <div class="card-head">
        <div class="ch-info">
          <div class="ch-name">${esc(s.name)}</div>
          <div class="ch-tags">
            <span class="tag tag-marks">${s.total || 100} marks</span>
            <span class="tag tag-pri-${s.priority || 'med'}">${priLabel}</span>
            ${cdTag}
          </div>
        </div>
        <button class="ch-del-btn" onclick="delSubject(${si})">‚úï</button>
      </div>

      <div class="card-prog">
        <div class="prog-hdr">
          <span>Syllabus Coverage</span>
          <strong>${doneM}/${totalM} marks ¬∑ ${pct}%</strong>
        </div>
        <div class="prog-track">
          <div class="prog-fill" style="width:${pct}%;background:${s.color}"></div>
        </div>
      </div>

      <div class="card-chaps" ${hide}>
        <div class="sec-lbl">Chapters & Topics</div>
        <div class="chap-list">${chHtml || '<div style="font-size:12px;color:var(--ink4);padding:2px 0">No chapters yet ‚Äî add below!</div>'}</div>
        <div class="add-chap">
          <input class="inp-n" type="text" placeholder="Chapter name..." id="cn${si}">
          <input class="inp-m" type="number" placeholder="Marks" id="cm${si}">
          <button class="add-chap-btn" onclick="addChap(${si})">+</button>
        </div>
      </div>

      <div class="card-log" ${hide}>
        <div class="sec-lbl">Daily Study Log</div>
        <div class="log-input-row">
          <textarea id="lt${si}" placeholder="What did you study today? Any notes..."></textarea>
          <button class="log-send" onclick="addLog(${si})">‚Üí</button>
        </div>
        <div class="log-entries">${lgHtml || '<div style="font-size:12px;color:var(--ink4)">No entries yet.</div>'}</div>
      </div>`;

                grid.appendChild(card);
                const cnEl = document.getElementById(`cn${si}`);
                if (cnEl) cnEl.addEventListener('keydown', e => { if (e.key === 'Enter') addChap(si); });
            });
        }

        // MODAL
        function openModal() {
            buildPicker();
            document.getElementById('overlay').classList.add('open');
            setTimeout(() => document.getElementById('fN').focus(), 100);
        }
        function closeModal() { document.getElementById('overlay').classList.remove('open'); }

        function saveSubject() {
            const name = document.getElementById('fN').value.trim();
            if (!name) { document.getElementById('fN').focus(); return; }
            db.subjects.push({
                name,
                total: parseInt(document.getElementById('fT').value) || 100,
                examDate: document.getElementById('fD').value,
                priority: document.getElementById('fP').value,
                color: selColor,
                chapters: [],
                logs: []
            });
            save(); render();
            ['fN', 'fT', 'fD'].forEach(id => document.getElementById(id).value = '');
            document.getElementById('fP').value = 'med';
            closeModal();
        }

        function delSubject(si) {
            if (!confirm(`Delete "${db.subjects[si].name}" and all data?`)) return;
            db.subjects.splice(si, 1); save(); render();
        }

        function addChap(si) {
            const nEl = document.getElementById(`cn${si}`);
            const mEl = document.getElementById(`cm${si}`);
            const name = nEl.value.trim();
            if (!name) return;
            db.subjects[si].chapters.push({ name, marks: parseInt(mEl.value) || 0, done: false });
            nEl.value = ''; mEl.value = ''; save(); render();
        }

        function toggleChap(si, ci) {
            db.subjects[si].chapters[ci].done = !db.subjects[si].chapters[ci].done;
            save(); render();
        }

        function delChap(e, si, ci) {
            e.stopPropagation();
            db.subjects[si].chapters.splice(ci, 1); save(); render();
        }

        function addLog(si) {
            const el = document.getElementById(`lt${si}`);
            const text = el.value.trim(); if (!text) return;
            const d = new Date();
            const date = `${d.getDate()}/${d.getMonth() + 1} ${String(d.getHours()).padStart(2, '0')}:${String(d.getMinutes()).padStart(2, '0')}`;
            if (!db.subjects[si].logs) db.subjects[si].logs = [];
            db.subjects[si].logs.push({ date, text });
            el.value = ''; save(); render();
        }

        function delLog(e, si, li) {
            e.stopPropagation();
            db.subjects[si].logs.splice(li, 1); save(); render();
        }

        function setFilter(v) { filterVal = v; render(); }

        function toggleCompact() {
            compact = !compact;
            document.getElementById('compBtn').textContent = compact ? '‚äû Full View' : '‚äü Compact';
            render();
        }

        function clearAll() {
            if (!confirm('Delete ALL subjects and data? This cannot be undone.')) return;
            db = { subjects: [] }; save(); render();
        }

        function esc(s) {
            return String(s).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
        }

        document.getElementById('overlay').addEventListener('click', e => { if (e.target === document.getElementById('overlay')) closeModal(); });
        document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
    </script>
</body>

</html>